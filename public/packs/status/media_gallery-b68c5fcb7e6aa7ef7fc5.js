webpackJsonp([27],{180:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"default",function(){return M});var a,s,n,o,l,r=i(1),p=i.n(r),u=i(2),d=i.n(u),v=i(3),c=i.n(v),h=i(4),g=i.n(h),m=i(0),f=i.n(m),y=i(5),b=i.n(y),_=i(25),x=i(7),P=i(41),k=Object(x.g)({toggle_visible:{id:"media_gallery.toggle_visible",defaultMessage:"Toggle visibility"}}),C=(s=a=function(e){function t(){var i,a,s;d()(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return i=a=c()(this,e.call.apply(e,[this].concat(o))),a.handleMouseEnter=function(e){a.hoverToPlay()&&e.target.play()},a.handleMouseLeave=function(e){a.hoverToPlay()&&(e.target.pause(),e.target.currentTime=0)},a.handleClick=function(e){var t=a.props,i=t.index,s=t.onClick;a.context.router&&0===e.button&&(e.preventDefault(),s(i)),e.stopPropagation()},s=i,c()(a,s)}return g()(t,e),t.prototype.hoverToPlay=function(){var e=this.props,t=e.attachment;return!e.autoPlayGif&&"gifv"===t.get("type")},t.prototype.render=function(){var e=this.props,t=e.attachment,i=e.index,a=e.size,s=50,n=100,o="auto",l="auto",r="auto",u="auto";1===a&&(s=100),(4===a||3===a&&i>0)&&(n=50),2===a?0===i?u="2px":l="2px":3===a?(0===i?u="2px":i>0&&(l="2px"),1===i?r="2px":i>1&&(o="2px")):4===a&&(0!==i&&2!==i||(u="2px"),1!==i&&3!==i||(l="2px"),i<2?r="2px":o="2px");var d="";if("image"===t.get("type")){var v=t.get("preview_url"),c=t.getIn(["meta","small","width"]),h=t.get("url"),g=t.getIn(["meta","original","width"]),m="number"==typeof g&&"number"==typeof c,f=m?h+" "+g+"w, "+v+" "+c+"w":null,y=m?"(min-width: 1025px) "+s/100*320+"px, "+s+"vw":null;d=p()("a",{className:"media-gallery__item-thumbnail",href:t.get("remote_url")||h,onClick:this.handleClick,target:"_blank"},void 0,p()("img",{src:v,srcSet:f,sizes:y,alt:""}))}else if("gifv"===t.get("type")){var b=!Object(P.a)()&&this.props.autoPlayGif;d=p()("div",{className:"media-gallery__gifv "+(b?"autoplay":"")},void 0,p()("video",{className:"media-gallery__item-gifv-thumbnail",role:"application",src:t.get("url"),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,autoPlay:b,loop:!0,muted:!0}),p()("span",{className:"media-gallery__gifv__label"},void 0,"GIF"))}return p()("div",{className:"media-gallery__item",style:{left:l,top:o,right:u,bottom:r,width:s+"%",height:n+"%"}},t.get("id"),d)},t}(f.a.PureComponent),a.contextTypes={router:b.a.object},a.defaultProps={autoPlayGif:!1},s),M=Object(x.h)((l=o=function(e){function t(){var i,a,s;d()(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return i=a=c()(this,e.call.apply(e,[this].concat(o))),a.state={visible:!a.props.sensitive},a.handleOpen=function(){a.setState({visible:!a.state.visible})},a.handleClick=function(e){a.props.onOpenMedia(a.props.media,e)},s=i,c()(a,s)}return g()(t,e),t.prototype.componentWillReceiveProps=function(e){e.sensitive!==this.props.sensitive&&this.setState({visible:!e.sensitive})},t.prototype.render=function(){var e=this,t=this.props,i=t.media,a=t.intl,s=t.sensitive,n=void 0;if(this.state.visible){var o=i.take(4).size;n=i.take(4).map(function(t,i){return p()(C,{onClick:e.handleClick,attachment:t,autoPlayGif:e.props.autoPlayGif,index:i,size:o},t.get("id"))})}else{var l=void 0;l=s?p()(x.b,{id:"status.sensitive_warning",defaultMessage:"Sensitive content"}):p()(x.b,{id:"status.media_hidden",defaultMessage:"Media hidden"}),n=p()("button",{className:"media-spoiler",onClick:this.handleOpen},void 0,p()("span",{className:"media-spoiler__warning"},void 0,l),p()("span",{className:"media-spoiler__trigger"},void 0,p()(x.b,{id:"status.sensitive_toggle",defaultMessage:"Click to view"})))}return p()("div",{className:"media-gallery",style:{height:this.props.height+"px"}},void 0,p()("div",{className:"spoiler-button "+(this.state.visible?"spoiler-button--visible":"")},void 0,p()(_.a,{title:a.formatMessage(k.toggle_visible),icon:this.state.visible?"eye":"eye-slash",overlay:!0,onClick:this.handleOpen})),n)},t}(f.a.PureComponent),o.defaultProps={autoPlayGif:!1},n=l))||n}});
//# sourceMappingURL=media_gallery-b68c5fcb7e6aa7ef7fc5.js.map