webpackJsonp([17],{156:function(e,t,n){"use strict";var o=n(42),i=n.n(o),r=n(9),s=n(273),c=n(18),a=n(8),l=(n.n(a),n(94)),u=(n.n(l),n(14)),d=function(){return Object(l.createSelector)([function(e,t){var n=t.type;return e.getIn(["settings",n],Object(a.Map)())},function(e,t){var n=t.type;return e.getIn(["timelines",n,"items"],Object(a.List)())},function(e){return e.get("statuses")}],function(e,t,n){var o=e.getIn(["regex","body"],"").trim(),i=null;try{i=o&&new RegExp(o,"i")}catch(e){}return t.filter(function(t){var o=n.get(t),r=!0;if(!1===e.getIn(["shows","reblog"])&&(r=r&&null===o.get("reblog")),!1===e.getIn(["shows","reply"])&&(r=r&&(null===o.get("in_reply_to_id")||o.get("in_reply_to_account_id")===u.e)),r&&i&&o.get("account")!==u.e){var s=o.get("reblog")?n.getIn([o.get("reblog"),"search_index"]):o.get("search_index");r=!i.test(s)}return r})})},h=function(){var e=d();return function(t,n){var o=n.timelineId;return{statusIds:e(t,{type:o}),isLoading:t.getIn(["timelines",o,"isLoading"],!0),hasMore:!!t.getIn(["timelines",o,"next"])}}},p=function(e,t){var n=t.timelineId,o=t.loadMore;return{onScrollToBottom:i()(function(){e(Object(c.D)(n,!1)),o()},300,{leading:!0}),onScrollToTop:i()(function(){e(Object(c.D)(n,!0))},100),onScroll:i()(function(){e(Object(c.D)(n,!1))},100)}};t.a=Object(r.connect)(h,p)(s.a)},264:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o,i,r=n(2),s=n.n(r),c=n(1),a=n.n(c),l=n(3),u=n.n(l),d=n(4),h=n.n(d),p=n(0),f=n.n(p),g=n(7),b=(i=o=function(e){function t(){return a()(this,t),u()(this,e.apply(this,arguments))}return h()(t,e),t.prototype.render=function(){var e=this.props.visible;return s()("button",{className:"load-more",disabled:!e,style:{visibility:e?"visible":"hidden"},onClick:this.props.onClick},void 0,s()(g.b,{id:"status.load_more",defaultMessage:"Load more"}))},t}(f.a.PureComponent),o.defaultProps={visible:!0},i)},265:function(e,t,n){"use strict";var o=n(2),i=n.n(o),r=n(0),s=(n.n(r),n(9)),c=n(155),a=n(72),l=n(17),u=n(43),d=n(22),h=n(58),p=n(55),f=n(153),g=n(29),b=n(7),v=n(14),m=Object(b.f)({deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this status?"},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"}}),y=function(){var e=Object(a.e)();return function(t,n){return{status:e(t,n.id)}}},M=function(e,t){var n=t.intl;return{onReply:function(t,n){e(Object(l.O)(t,n))},onModalReblog:function(t){e(Object(u.q)(t))},onReblog:function(t,n){t.get("reblogged")?e(Object(u.t)(t)):n.shiftKey||!v.b?this.onModalReblog(t):e(Object(g.d)("BOOST",{status:t,onReblog:this.onModalReblog}))},onFavourite:function(t){e(t.get("favourited")?Object(u.r)(t):Object(u.m)(t))},onPin:function(t){e(t.get("pinned")?Object(u.s)(t):Object(u.p)(t))},onEmbed:function(t){e(Object(g.d)("EMBED",{url:t.get("url")}))},onDelete:function(t){e(v.d?Object(g.d)("CONFIRM",{message:n.formatMessage(m.deleteMessage),confirm:n.formatMessage(m.deleteConfirm),onConfirm:function(){return e(Object(h.e)(t.get("id")))}}):Object(h.e)(t.get("id")))},onMention:function(t,n){e(Object(l.M)(t,n))},onOpenMedia:function(t,n){e(Object(g.d)("MEDIA",{media:t,index:n}))},onOpenVideo:function(t,n){e(Object(g.d)("VIDEO",{media:t,time:n}))},onBlock:function(t){e(Object(g.d)("CONFIRM",{message:i()(b.b,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:i()("strong",{},void 0,"@",t.get("acct"))}}),confirm:n.formatMessage(m.blockConfirm),onConfirm:function(){return e(Object(d.r)(t.get("id")))}}))},onReport:function(t){e(Object(f.i)(t.get("account"),t))},onMute:function(t){e(Object(p.g)(t))},onMuteConversation:function(t){e(t.get("muted")?Object(h.h)(t.get("id")):Object(h.g)(t.get("id")))}}};t.a=Object(b.g)(Object(s.connect)(y,M)(c.a))},266:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o,i,r=n(2),s=n.n(r),c=n(1),a=n.n(c),l=n(3),u=n.n(l),d=n(4),h=n.n(d),p=n(92),f=n.n(p),g=n(0),b=n.n(g),v=n(154),m=n(5),y=n.n(m),M=n(267),O=n(264),j=n(272),I=n(8),S=(n.n(I),n(10)),C=n.n(S),k=n(157),_=(i=o=function(e){function t(){var n,o,i;a()(this,t);for(var r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=o=u()(this,e.call.apply(e,[this].concat(s))),o.state={lastMouseMove:null},o.intersectionObserverWrapper=new j.a,o.handleScroll=f()(function(){if(o.node){var e=o.node,t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight,r=n-t-i;o._oldScrollPosition=n-t,400>r&&o.props.onScrollToBottom&&!o.props.isLoading?o.props.onScrollToBottom():t<100&&o.props.onScrollToTop?o.props.onScrollToTop():o.props.onScroll&&o.props.onScroll()}},150,{trailing:!0}),o.handleMouseMove=f()(function(){o._lastMouseMove=new Date},300),o.handleMouseLeave=function(){o._lastMouseMove=null},o.onFullScreenChange=function(){o.setState({fullscreen:Object(k.d)()})},o.setRef=function(e){o.node=e},o.handleLoadMore=function(e){e.preventDefault(),o.props.onScrollToBottom()},i=n,u()(o,i)}return h()(t,e),t.prototype.componentDidMount=function(){this.attachScrollListener(),this.attachIntersectionObserver(),Object(k.a)(this.onFullScreenChange),this.handleScroll()},t.prototype.componentDidUpdate=function(e){if(b.a.Children.count(e.children)>0&&b.a.Children.count(e.children)<b.a.Children.count(this.props.children)&&this.getFirstChildKey(e)!==this.getFirstChildKey(this.props)&&this._oldScrollPosition&&this.node.scrollTop>0){var t=this.node.scrollHeight-this._oldScrollPosition;this.node.scrollTop!==t&&(this.node.scrollTop=t)}else this._oldScrollPosition=this.node.scrollHeight-this.node.scrollTop},t.prototype.componentWillUnmount=function(){this.detachScrollListener(),this.detachIntersectionObserver(),Object(k.b)(this.onFullScreenChange)},t.prototype.attachIntersectionObserver=function(){this.intersectionObserverWrapper.connect({root:this.node,rootMargin:"300% 0px"})},t.prototype.detachIntersectionObserver=function(){this.intersectionObserverWrapper.disconnect()},t.prototype.attachScrollListener=function(){this.node.addEventListener("scroll",this.handleScroll)},t.prototype.detachScrollListener=function(){this.node.removeEventListener("scroll",this.handleScroll)},t.prototype.getFirstChildKey=function(e){var t=e.children,n=t;return t instanceof I.List?n=t.get(0):Array.isArray(t)&&(n=t[0]),n&&n.key},t.prototype._recentlyMoved=function(){return null!==this._lastMouseMove&&new Date-this._lastMouseMove<600},t.prototype.render=function(){var e=this,t=this.props,n=t.children,o=t.scrollKey,i=t.trackScroll,r=t.shouldUpdateScroll,c=t.isLoading,a=t.hasMore,l=t.prepend,u=t.emptyMessage,d=this.state.fullscreen,h=b.a.Children.count(n),p=a&&h>0?s()(O.a,{visible:!c,onClick:this.handleLoadMore}):null,f=null;return f=c||h>0||!u?b.a.createElement("div",{className:C()("scrollable",{fullscreen:d}),ref:this.setRef,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},s()("div",{role:"feed",className:"item-list"},void 0,l,b.a.Children.map(this.props.children,function(t,n){return s()(M.a,{id:t.key,index:n,listLength:h,intersectionObserverWrapper:e.intersectionObserverWrapper,saveHeightKey:i?e.context.router.route.location.key+":"+o:null},t.key,t)}),p)):b.a.createElement("div",{className:"empty-column-indicator",ref:this.setRef},u),i?s()(v.a,{scrollKey:o,shouldUpdateScroll:r},void 0,f):f},t}(g.PureComponent),o.contextTypes={router:y.a.object},o.defaultProps={trackScroll:!0},i)},267:function(e,t,n){"use strict";var o=n(9),i=n(268),r=n(93),s=function(e,t){return{cachedHeight:e.getIn(["height_cache",t.saveHeightKey,t.id])}},c=function(e){return{onHeightChange:function(t,n,o){e(Object(r.d)(t,n,o))}}};t.a=Object(o.connect)(s,c)(i.a)},268:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(1),i=n.n(o),r=n(3),s=n.n(r),c=n(4),a=n.n(c),l=n(0),u=n.n(l),d=n(269),h=n(271),p=n(8),f=(n.n(p),["id","index","listLength"]),g=["id","index","listLength","cachedHeight"],b=function(e){function t(){var n,o,r;i()(this,t);for(var c=arguments.length,a=Array(c),l=0;l<c;l++)a[l]=arguments[l];return n=o=s()(this,e.call.apply(e,[this].concat(a))),o.state={isHidden:!1},o.handleIntersection=function(e){o.entry=e,Object(d.a)(o.calculateHeight),o.setState(o.updateStateAfterIntersection)},o.updateStateAfterIntersection=function(e){return e.isIntersecting&&!o.entry.isIntersecting&&Object(d.a)(o.hideIfNotIntersecting),{isIntersecting:o.entry.isIntersecting,isHidden:!1}},o.calculateHeight=function(){var e=o.props,t=e.onHeightChange,n=e.saveHeightKey,i=e.id;o.height=Object(h.a)(o.entry).height,t&&n&&t(n,i,o.height)},o.hideIfNotIntersecting=function(){o.componentMounted&&o.setState(function(e){return{isHidden:!e.isIntersecting}})},o.handleRef=function(e){o.node=e},r=n,s()(o,r)}return a()(t,e),t.prototype.shouldComponentUpdate=function(e,t){var n=this,o=!this.state.isIntersecting&&(this.state.isHidden||this.props.cachedHeight);return!!o!=!(t.isIntersecting||!t.isHidden&&!e.cachedHeight)||!(o?g:f).every(function(t){return Object(p.is)(e[t],n.props[t])})},t.prototype.componentDidMount=function(){var e=this.props,t=e.intersectionObserverWrapper,n=e.id;t.observe(n,this.node,this.handleIntersection),this.componentMounted=!0},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.intersectionObserverWrapper,n=e.id;t.unobserve(n,this.node),this.componentMounted=!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.id,o=e.index,i=e.listLength,r=e.cachedHeight,s=this.state,c=s.isIntersecting,a=s.isHidden;return c||!a&&!r?u.a.createElement("article",{ref:this.handleRef,"aria-posinset":o,"aria-setsize":i,"data-id":n,tabIndex:"0"},t&&u.a.cloneElement(t,{hidden:!1})):u.a.createElement("article",{ref:this.handleRef,"aria-posinset":o,"aria-setsize":i,style:{height:(this.height||r)+"px",opacity:0,overflow:"hidden"},"data-id":n,tabIndex:"0"},t&&u.a.cloneElement(t,{hidden:!0}))},t}(u.a.Component)},269:function(e,t,n){"use strict";function o(e){for(;c.length&&e.timeRemaining()>0;)c.shift()();c.length?requestIdleCallback(o):a=!1}function i(e){c.push(e),a||(a=!0,requestIdleCallback(o))}var r=n(270),s=n.n(r),c=new s.a,a=!1;t.a=i},270:function(e,t,n){"use strict";function o(){this.length=0}o.prototype.push=function(e){var t={item:e};this.last?this.last=this.last.next=t:this.last=this.first=t,this.length++},o.prototype.shift=function(){var e=this.first;if(e)return this.first=e.next,--this.length||(this.last=void 0),e.item},o.prototype.slice=function(e,t){e=void 0===e?0:e,t=void 0===t?1/0:t;for(var n=[],o=0,i=this.first;i&&!(--t<0);i=i.next)++o>e&&n.push(i.item);return n},e.exports=o},271:function(e,t,n){"use strict";function o(e){if("boolean"!=typeof i){var t=e.target.getBoundingClientRect(),n=e.boundingClientRect;i=t.height!==n.height||t.top!==n.top||t.width!==n.width||t.bottom!==n.bottom||t.left!==n.left||t.right!==n.right}return i?e.target.getBoundingClientRect():e.boundingClientRect}var i=void 0;t.a=o},272:function(e,t,n){"use strict";var o=n(1),i=n.n(o),r=function(){function e(){i()(this,e),this.callbacks={},this.observerBacklog=[],this.observer=null}return e.prototype.connect=function(e){var t=this,n=function(e){e.forEach(function(e){var n=e.target.getAttribute("data-id");t.callbacks[n]&&t.callbacks[n](e)})};this.observer=new IntersectionObserver(n,e),this.observerBacklog.forEach(function(e){var n=e[0],o=e[1],i=e[2];t.observe(n,o,i)}),this.observerBacklog=null},e.prototype.observe=function(e,t,n){this.observer?(this.callbacks[e]=n,this.observer.observe(t)):this.observerBacklog.push([e,t,n])},e.prototype.unobserve=function(e,t){this.observer&&(delete this.callbacks[e],this.observer.unobserve(t))},e.prototype.disconnect=function(){this.observer&&(this.callbacks={},this.observer.disconnect(),this.observer=null)},e}();t.a=r},273:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var o,i,r=n(28),s=n.n(r),c=n(2),a=n.n(c),l=n(30),u=n.n(l),d=n(1),h=n.n(d),p=n(3),f=n.n(p),g=n(4),b=n.n(g),v=n(0),m=n.n(v),y=n(13),M=n.n(y),O=n(5),j=n.n(O),I=n(265),S=n(12),C=n.n(S),k=n(266),_=(i=o=function(e){function t(){var n,o,i;h()(this,t);for(var r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=o=f()(this,e.call.apply(e,[this].concat(s))),o.handleMoveUp=function(e){var t=o.props.statusIds.indexOf(e)-1;o._selectChild(t)},o.handleMoveDown=function(e){var t=o.props.statusIds.indexOf(e)+1;o._selectChild(t)},o.setRef=function(e){o.node=e},i=n,f()(o,i)}return b()(t,e),t.prototype._selectChild=function(e){var t=this.node.node.querySelector("article:nth-of-type("+(e+1)+") .focusable");t&&t.focus()},t.prototype.render=function(){var e=this,t=this.props,n=t.statusIds,o=u()(t,["statusIds"]),i=o.isLoading,r=i||n.size>0?n.map(function(t){return a()(I.a,{id:t,onMoveUp:e.handleMoveUp,onMoveDown:e.handleMoveDown},t)}):null;return m.a.createElement(k.a,s()({},o,{ref:this.setRef}),r)},t}(C.a),o.propTypes={scrollKey:j.a.string.isRequired,statusIds:M.a.list.isRequired,onScrollToBottom:j.a.func,onScrollToTop:j.a.func,onScroll:j.a.func,trackScroll:j.a.bool,shouldUpdateScroll:j.a.func,isLoading:j.a.bool,hasMore:j.a.bool,prepend:j.a.node,emptyMessage:j.a.node},o.defaultProps={trackScroll:!0},i)},777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return S});var o,i,r=n(2),s=n.n(r),c=n(1),a=n.n(c),l=n(3),u=n.n(l),d=n(4),h=n.n(d),p=n(0),f=n.n(p),g=n(9),b=n(156),v=n(97),m=n(95),y=n(18),M=n(277),O=n(7),j=n(101),I=function(e,t){return{hasUnread:e.getIn(["timelines","hashtag:"+t.params.id,"unread"])>0}},S=(o=Object(g.connect)(I))(i=function(e){function t(){var n,o,i;a()(this,t);for(var r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=o=u()(this,e.call.apply(e,[this].concat(s))),o.handlePin=function(){var e=o.props,t=e.columnId,n=e.dispatch;n(t?Object(M.f)(t):Object(M.d)("HASHTAG",{id:o.props.params.id}))},o.handleMove=function(e){var t=o.props,n=t.columnId;(0,t.dispatch)(Object(M.e)(n,e))},o.handleHeaderClick=function(){o.column.scrollTop()},o.setRef=function(e){o.column=e},o.handleLoadMore=function(){o.props.dispatch(Object(y.s)(o.props.params.id))},i=n,u()(o,i)}return h()(t,e),t.prototype._subscribe=function(e,t){this.disconnect=e(Object(j.b)(t))},t.prototype._unsubscribe=function(){this.disconnect&&(this.disconnect(),this.disconnect=null)},t.prototype.componentDidMount=function(){var e=this.props.dispatch,t=this.props.params.id;e(Object(y.z)(t)),this._subscribe(e,t)},t.prototype.componentWillReceiveProps=function(e){e.params.id!==this.props.params.id&&(this.props.dispatch(Object(y.z)(e.params.id)),this._unsubscribe(),this._subscribe(this.props.dispatch,e.params.id))},t.prototype.componentWillUnmount=function(){this._unsubscribe()},t.prototype.render=function(){var e=this.props,t=e.hasUnread,n=e.columnId,o=e.multiColumn,i=this.props.params.id,r=!!n;return f.a.createElement(v.a,{ref:this.setRef},s()(m.a,{icon:"hashtag",active:t,title:i,onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:r,multiColumn:o,showBackButton:!0}),s()(b.a,{trackScroll:!r,scrollKey:"hashtag_timeline-"+n,timelineId:"hashtag:"+i,loadMore:this.handleLoadMore,emptyMessage:s()(O.b,{id:"empty_column.hashtag",defaultMessage:"There is nothing in this hashtag yet."})}))},t}(f.a.PureComponent))||i}});
//# sourceMappingURL=hashtag_timeline-1ec9bdb3b0dad3e452ad.js.map